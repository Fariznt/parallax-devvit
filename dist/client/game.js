import{r as n,j as e,n as d,c as p}from"./client.js";const h=()=>{const[a,o]=n.useState({count:0,username:null,loading:!0}),[r,i]=n.useState(null);n.useEffect(()=>{(async()=>{try{const t=await fetch("/api/init");if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.json();if(s.type!=="init")throw new Error("Unexpected response");o({count:s.count,username:s.username,loading:!1}),i(s.postId)}catch(t){console.error("Failed to init counter",t),o(s=>({...s,loading:!1}))}})()},[]);const c=n.useCallback(async l=>{if(!r){console.error("No postId â€“ cannot update counter");return}try{const t=await fetch(`/api/${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.json();o(u=>({...u,count:s.count}))}catch(t){console.error(`Failed to ${l}`,t)}},[r]),m=n.useCallback(()=>c("increment"),[c]),x=n.useCallback(()=>c("decrement"),[c]);return{...a,increment:m,decrement:x}},f=()=>{const{count:a,username:o,loading:r,increment:i,decrement:c}=h();return e.jsxs("div",{className:"flex relative flex-col justify-center items-center min-h-screen gap-4",children:[e.jsx("img",{className:"object-contain w-1/2 max-w-[250px] mx-auto",src:"/snoo.png",alt:"Snoo"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-900 ",children:o?`Hey ${o} ðŸ‘‹`:""}),e.jsxs("p",{className:"text-base text-center text-gray-600 ",children:["Edit ",e.jsx("span",{className:"bg-[#e5ebee]  px-1 py-0.5 rounded",children:"src/client/game/App.tsx"})," to get started."]})]}),e.jsxs("div",{className:"flex items-center justify-center mt-5",children:[e.jsx("button",{className:"flex items-center justify-center bg-[#d93900] text-white w-14 h-14 text-[2.5em] rounded-full cursor-pointer font-mono leading-none transition-colors",onClick:c,disabled:r,children:"-"}),e.jsx("span",{className:"text-[1.8em] font-medium mx-5 min-w-[50px] text-center leading-none text-gray-900",children:r?"...":a}),e.jsx("button",{className:"flex items-center justify-center bg-[#d93900] text-white w-14 h-14 text-[2.5em] rounded-full cursor-pointer font-mono leading-none transition-colors",onClick:i,disabled:r,children:"+"})]}),e.jsxs("footer",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-3 text-[0.8em] text-gray-600",children:[e.jsx("button",{className:"cursor-pointer",onClick:()=>d("https://developers.reddit.com/docs"),children:"Docs"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{className:"cursor-pointer",onClick:()=>d("https://www.reddit.com/r/Devvit"),children:"r/Devvit"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{className:"cursor-pointer",onClick:()=>d("https://discord.com/invite/R7yu2wh9Qz"),children:"Discord"})]})]})};p.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(f,{})}));
//# sourceMappingURL=game.js.map
