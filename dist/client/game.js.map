{"version":3,"file":"game.js","sources":["../../src/client/hooks/useCounter.ts","../../src/client/game/App.tsx","../../src/client/game/game.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport type { InitResponse, IncrementResponse, DecrementResponse } from '../../shared/types/api';\n\ninterface CounterState {\n  count: number;\n  username: string | null;\n  loading: boolean;\n}\n\nexport const useCounter = () => {\n  const [state, setState] = useState<CounterState>({\n    count: 0,\n    username: null,\n    loading: true,\n  });\n  const [postId, setPostId] = useState<string | null>(null);\n\n  // fetch initial data\n  useEffect(() => {\n    const init = async () => {\n      try {\n        const res = await fetch('/api/init');\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const data: InitResponse = await res.json();\n        if (data.type !== 'init') throw new Error('Unexpected response');\n        setState({ count: data.count, username: data.username, loading: false });\n        setPostId(data.postId);\n      } catch (err) {\n        console.error('Failed to init counter', err);\n        setState((prev) => ({ ...prev, loading: false }));\n      }\n    };\n    void init();\n  }, []);\n\n  const update = useCallback(\n    async (action: 'increment' | 'decrement') => {\n      if (!postId) {\n        console.error('No postId â€“ cannot update counter');\n        return;\n      }\n      try {\n        const res = await fetch(`/api/${action}`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({}),\n        });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const data: IncrementResponse | DecrementResponse = await res.json();\n        setState((prev) => ({ ...prev, count: data.count }));\n      } catch (err) {\n        console.error(`Failed to ${action}`, err);\n      }\n    },\n    [postId]\n  );\n\n  const increment = useCallback(() => update('increment'), [update]);\n  const decrement = useCallback(() => update('decrement'), [update]);\n\n  return {\n    ...state,\n    increment,\n    decrement,\n  } as const;\n};\n","import { navigateTo } from '@devvit/web/client';\nimport { useCounter } from '../hooks/useCounter';\n\nexport const App = () => {\n  const { count, username, loading, increment, decrement } = useCounter();\n  return (\n    <div className=\"flex relative flex-col justify-center items-center min-h-screen gap-4\">\n      <img className=\"object-contain w-1/2 max-w-[250px] mx-auto\" src=\"/snoo.png\" alt=\"Snoo\" />\n      <div className=\"flex flex-col items-center gap-2\">\n        <h1 className=\"text-2xl font-bold text-center text-gray-900 \">\n          {username ? `Hey ${username} ðŸ‘‹` : ''}\n        </h1>\n        <p className=\"text-base text-center text-gray-600 \">\n          Edit <span className=\"bg-[#e5ebee]  px-1 py-0.5 rounded\">src/client/game/App.tsx</span> to\n          get started.\n        </p>\n      </div>\n      <div className=\"flex items-center justify-center mt-5\">\n        <button\n          className=\"flex items-center justify-center bg-[#d93900] text-white w-14 h-14 text-[2.5em] rounded-full cursor-pointer font-mono leading-none transition-colors\"\n          onClick={decrement}\n          disabled={loading}\n        >\n          -\n        </button>\n        <span className=\"text-[1.8em] font-medium mx-5 min-w-[50px] text-center leading-none text-gray-900\">\n          {loading ? '...' : count}\n        </span>\n        <button\n          className=\"flex items-center justify-center bg-[#d93900] text-white w-14 h-14 text-[2.5em] rounded-full cursor-pointer font-mono leading-none transition-colors\"\n          onClick={increment}\n          disabled={loading}\n        >\n          +\n        </button>\n      </div>\n      <footer className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-3 text-[0.8em] text-gray-600\">\n        <button\n          className=\"cursor-pointer\"\n          onClick={() => navigateTo('https://developers.reddit.com/docs')}\n        >\n          Docs\n        </button>\n        <span className=\"text-gray-300\">|</span>\n        <button\n          className=\"cursor-pointer\"\n          onClick={() => navigateTo('https://www.reddit.com/r/Devvit')}\n        >\n          r/Devvit\n        </button>\n        <span className=\"text-gray-300\">|</span>\n        <button\n          className=\"cursor-pointer\"\n          onClick={() => navigateTo('https://discord.com/invite/R7yu2wh9Qz')}\n        >\n          Discord\n        </button>\n      </footer>\n    </div>\n  );\n};\n","import '../index.css';\n\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { App } from './App';\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"names":["useCounter","state","setState","useState","postId","setPostId","useEffect","res","data","err","prev","update","useCallback","action","increment","decrement","App","count","username","loading","jsxs","jsx","navigateTo","createRoot","StrictMode"],"mappings":"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"}